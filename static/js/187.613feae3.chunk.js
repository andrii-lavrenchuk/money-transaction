"use strict";(self.webpackChunkmoney_transaction=self.webpackChunkmoney_transaction||[]).push([[187],{5187:function(n,t,r){r.r(t),r.d(t,{default:function(){return x}});var e=r(2791),a=r(364),s=r(6384),c=r(1413),o=r(5987),i=r(1694),u=r.n(i),l=r(162),d=r(3329),f=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],h=e.forwardRef((function(n,t){var r=n.bsPrefix,e=n.className,a=n.striped,s=n.bordered,i=n.borderless,h=n.hover,m=n.size,p=n.variant,v=n.responsive,x=(0,o.Z)(n,f),b=(0,l.vE)(r,"table"),j=u()(e,b,p&&"".concat(b,"-").concat(p),m&&"".concat(b,"-").concat(m),a&&"".concat(b,"-striped"),s&&"".concat(b,"-bordered"),i&&"".concat(b,"-borderless"),h&&"".concat(b,"-hover")),g=(0,d.jsx)("table",(0,c.Z)((0,c.Z)({},x),{},{className:j,ref:t}));if(v){var N="".concat(b,"-responsive");return"string"===typeof v&&(N="".concat(N,"-").concat(v)),(0,d.jsx)("div",{className:N,children:g})}return g})),m=function(n){var t=n.transactions;return(0,d.jsxs)(h,{striped:!0,bordered:!0,hover:!0,variant:"info",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:"From"}),(0,d.jsx)("th",{children:"To"}),(0,d.jsx)("th",{children:"Amount"}),(0,d.jsx)("th",{children:"Date"})]})}),(0,d.jsx)("tbody",{children:t.map((function(n,t){return(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:n.from}),(0,d.jsx)("td",{children:n.to}),(0,d.jsx)("td",{children:n.amount}),(0,d.jsx)("td",{children:n.date})]},t)}))})]})},p=r(1814),v={getAllTransactions:p.U.getAllTransaction},x=(0,a.$j)((function(n){return{allProfiles:n.users.allProfiles.profiles,allTransactions:n.transactions.allUsersTransactions,currentUserId:n.users.currentUser.id,isLoading:n.transactions.isLoading,amount:n.transactions.amount}}),v)((function(n){var t=n.amount,r=n.getAllTransactions,c=n.allTransactions,o=n.currentUserId,i=n.isLoading,u=n.allProfiles,l=(0,a.I0)();(0,e.useEffect)((function(){r()}),[r]),(0,e.useEffect)((function(){l(p.g.setAmountSuccess(function(){var n=0;return n=c.reduce((function(t,r){return o===r.to?t+r.amount:o===r.from?t-r.amount:o===r.from&&o===r.to?t+r.amount:n=t}),n)}()))}),[c,o,l]);var f=c.filter((function(n){return n.from===o})),h=c.filter((function(n){return n.to===o})),v=f.map((function(n){return{to:n.to,amount:n.amount,date:n.created_at}})),x=h.map((function(n){return{from:n.from,amount:n.amount,date:n.created_at}})),b=[],j=[];return function(n,t){for(var r=0;r<n.length;r+=1)for(var e=0;e<t.length;e+=1)if(n[r].to!==o&&n[r].to===t[e].user){var a={from:"Me",to:"".concat(t[e].firstName," ").concat(t[e].lastName),amount:n[r].amount,date:n[r].date.slice(0,10)};b.push(a)}}(v,u),function(n,t){for(var r=0;r<n.length;r+=1)for(var e=0;e<t.length;e+=1)if(n[r].from!==o&&n[r].from===t[e].user){var a={to:"Me",from:"".concat(t[e].firstName," ").concat(t[e].lastName),amount:n[r].amount,date:n[r].date.slice(0,10)};j.push(a)}}(x,u),(0,d.jsx)(d.Fragment,{children:i?(0,d.jsx)(s.Z,{}):(0,d.jsx)("div",{className:"container",children:(0,d.jsxs)("div",{className:"row",children:[(0,d.jsxs)("div",{className:"col-lg-6 pt-5",children:[(0,d.jsx)("h2",{className:"pb-4",children:"My transactions "}),(0,d.jsxs)("h3",{children:["Your balance is ",t," $"]})]}),(0,d.jsxs)("div",{className:"col-lg-6 pt-5",children:[(0,d.jsx)("h2",{className:"pb-5",children:"Transactions history"}),(0,d.jsx)(m,{transactions:b}),(0,d.jsx)(m,{transactions:j})]})]})})})}))},1814:function(n,t,r){r.d(t,{g:function(){return e.Z},U:function(){return d}});var e=r(9183),a=r(1413),s=r(5861),c=r(7757),o=r.n(c),i=r(4569),u=r.n(i);u().defaults.baseURL="https://lassognchwmnevcbvdwb.supabase.co";var l={"Content-Type":"application/json",apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJvbGUiOiJhbm9uIiwiaWF0IjoxNjQyNDA1NTEyLCJleHAiOjE5NTc5ODE1MTJ9.kyuoxEoLxxKrJGbNZSfibFbpFdEAN2T7cJgtJcsp26I"},d={makeTransaction:function(n){return function(){var t=(0,s.Z)(o().mark((function t(r){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(e.Z.makeTransactionRequest()),t.prev=1,t.next=4,u().post("https://lassognchwmnevcbvdwb.supabase.co/rest/v1/transaction",n,{headers:(0,a.Z)((0,a.Z)({},l),{},{Prefer:"return=representation"})});case 4:r(e.Z.makeTransactionSuccess()),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),r(e.Z.makeTransactionError(t.t0));case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(n){return t.apply(this,arguments)}}()},getAllTransaction:function(){return function(){var n=(0,s.Z)(o().mark((function n(t){var r;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t(e.Z.getAllTransactionRequest()),n.prev=1,n.next=4,u().get("/rest/v1/transaction?select=*",{headers:l});case 4:r=n.sent,t(e.Z.getAllTransactionSuccess(r.data)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),t(e.Z.getAllTransactionError(n.t0));case 11:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(t){return n.apply(this,arguments)}}()}}}}]);
//# sourceMappingURL=187.613feae3.chunk.js.map